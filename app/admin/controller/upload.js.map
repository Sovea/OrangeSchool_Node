{
    "version": 3,
    "sources": [
        "../../../src/admin/controller/upload.js"
    ],
    "names": [
        "_asyncToGenerator",
        "fn",
        "gen",
        "apply",
        "arguments",
        "Promise",
        "resolve",
        "reject",
        "step",
        "key",
        "arg",
        "info",
        "value",
        "error",
        "done",
        "then",
        "err",
        "Base",
        "require",
        "fs",
        "module",
        "exports",
        "brandPicAction",
        "_this",
        "brandFile",
        "file",
        "think",
        "isEmpty",
        "fail",
        "that",
        "filename",
        "uuid",
        "is",
        "createReadStream",
        "path",
        "os",
        "createWriteStream",
        "ROOT_PATH",
        "pipe",
        "success",
        "name",
        "fileUrl",
        "adPicAction",
        "advertFile",
        "article_adPicAction",
        "brandNewPicAction",
        "_this2",
        "categoryWapBannerPicAction",
        "_this3",
        "imageFile",
        "topicThumbAction",
        "_this4"
    ],
    "mappings": "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",
    "file": "../../../src/admin/controller/upload.js",
    "sourcesContent": [
        "function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\r\n\r\nconst Base = require('./base.js');\r\nconst fs = require('fs');\r\n\r\nmodule.exports = class extends Base {\r\n  brandPicAction() {\r\n    var _this = this;\r\n\r\n    return _asyncToGenerator(function* () {\r\n      const brandFile = _this.file('brand_pic');\r\n      if (think.isEmpty(brandFile)) {\r\n        return _this.fail('保存失败');\r\n      }\r\n      const that = _this;\r\n      const filename = 'static/upload/brand/' + think.uuid(32) + '.jpg';\r\n      const is = fs.createReadStream(brandFile.path);\r\n      const os = fs.createWriteStream(think.ROOT_PATH + '/www/' + filename);\r\n      is.pipe(os);\r\n\r\n      return that.success({\r\n        name: 'brand_pic',\r\n        fileUrl: 'https://wjlpt.com/nideshop_api' + filename\r\n      });\r\n    })();\r\n  }\r\n  adPicAction(){\r\n    var _this = this;\r\n\r\n    return _asyncToGenerator(function* () {\r\n      const advertFile = _this.file('ad_pic');\r\n      if (think.isEmpty(advertFile)) {\r\n        return _this.fail('保存失败');\r\n      }\r\n      const that = _this;\r\n      const filename = 'static/upload/advert/' + think.uuid(32) + '.jpg';\r\n      const is = fs.createReadStream(advertFile.path);\r\n      const os = fs.createWriteStream(think.ROOT_PATH + '/www/' + filename);\r\n      is.pipe(os);\r\n\r\n      return that.success({\r\n        name: 'ad_pic',\r\n        fileUrl: 'https://wjlpt.com/nideshop_api' + filename\r\n      });\r\n    })();\r\n  }\r\n  article_adPicAction(){\r\n    var _this = this;\r\n\r\n    return _asyncToGenerator(function* () {\r\n      const advertFile = _this.file('ad_pic');\r\n      if (think.isEmpty(advertFile)) {\r\n        return _this.fail('保存失败');\r\n      }\r\n      const that = _this;\r\n      const filename = 'static/upload/article_advert/' + think.uuid(32) + '.jpg';\r\n      const is = fs.createReadStream(advertFile.path);\r\n      const os = fs.createWriteStream(think.ROOT_PATH + '/www/' + filename);\r\n      is.pipe(os);\r\n\r\n      return that.success({\r\n        name: 'ad_pic',\r\n        fileUrl: 'https://wjlpt.com/nideshop_api' + filename\r\n      });\r\n    })();\r\n  }\r\n  brandNewPicAction() {\r\n    var _this2 = this;\r\n\r\n    return _asyncToGenerator(function* () {\r\n      const brandFile = _this2.file('brand_new_pic');\r\n      if (think.isEmpty(brandFile)) {\r\n        return _this2.fail('保存失败');\r\n      }\r\n      const that = _this2;\r\n      const filename = '/static/upload/brand/' + think.uuid(32) + '.jpg';\r\n\r\n      const is = fs.createReadStream(brandFile.path);\r\n      const os = fs.createWriteStream(think.ROOT_PATH + '/www/' + filename);\r\n      is.pipe(os);\r\n\r\n      return that.success({\r\n        name: 'brand_new_pic',\r\n        fileUrl: 'https://wjlpt.com/nideshop_api' + filename\r\n      });\r\n    })();\r\n  }\r\n\r\n  categoryWapBannerPicAction() {\r\n    var _this3 = this;\r\n\r\n    return _asyncToGenerator(function* () {\r\n      const imageFile = _this3.file('wap_banner_pic');\r\n      if (think.isEmpty(imageFile)) {\r\n        return _this3.fail('保存失败');\r\n      }\r\n      const that = _this3;\r\n      const filename = '/static/upload/category/' + think.uuid(32) + '.jpg';\r\n\r\n      const is = fs.createReadStream(imageFile.path);\r\n      const os = fs.createWriteStream(think.ROOT_PATH + '/www/' + filename);\r\n      is.pipe(os);\r\n\r\n      return that.success({\r\n        name: 'wap_banner_url',\r\n        fileUrl: 'https://wjlpt.com/nideshop_api' + filename\r\n      });\r\n    })();\r\n  }\r\n\r\n  topicThumbAction() {\r\n    var _this4 = this;\r\n\r\n    return _asyncToGenerator(function* () {\r\n      const imageFile = _this4.file('scene_pic_url');\r\n      if (think.isEmpty(imageFile)) {\r\n        return _this4.fail('保存失败');\r\n      }\r\n      const that = _this4;\r\n      const filename = '/static/upload/topic/' + think.uuid(32) + '.jpg';\r\n\r\n      const is = fs.createReadStream(imageFile.path);\r\n      const os = fs.createWriteStream(think.ROOT_PATH + '/www/' + filename);\r\n      is.pipe(os);\r\n\r\n      return that.success({\r\n        name: 'scene_pic_url',\r\n        fileUrl: 'https://wjlpt.com/nideshop_api' + filename\r\n      });\r\n    })();\r\n  }\r\n};\r\n//# sourceMappingURL=upload.js.map"
    ]
}