{
    "version": 3,
    "sources": [
        "../../../src/admin/controller/topic.js"
    ],
    "names": [
        "_asyncToGenerator",
        "fn",
        "gen",
        "apply",
        "arguments",
        "Promise",
        "resolve",
        "reject",
        "step",
        "key",
        "arg",
        "info",
        "value",
        "error",
        "done",
        "then",
        "err",
        "Base",
        "require",
        "module",
        "exports",
        "indexAction",
        "_this",
        "page",
        "get",
        "size",
        "name",
        "model",
        "data",
        "where",
        "title",
        "order",
        "countSelect",
        "success",
        "infoAction",
        "_this2",
        "id",
        "find",
        "storeAction",
        "_this3",
        "isPost",
        "values",
        "post",
        "is_show",
        "is_new",
        "update",
        "add",
        "destoryAction",
        "_this4",
        "limit",
        "delete"
    ],
    "mappings": "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",
    "file": "../../../src/admin/controller/topic.js",
    "sourcesContent": [
        "function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\r\n\r\nconst Base = require('./base.js');\r\n\r\nmodule.exports = class extends Base {\r\n  /**\r\n   * index action\r\n   * @return {Promise} []\r\n   */\r\n  indexAction() {\r\n    var _this = this;\r\n\r\n    return _asyncToGenerator(function* () {\r\n      const page = _this.get('page') || 1;\r\n      const size = _this.get('size') || 10;\r\n      const name = _this.get('name') || '';\r\n\r\n      const model = _this.model('topic');\r\n      const data = yield model.where({ title: ['like', `%${name}%`] }).order(['id DESC']).page(page, size).countSelect();\r\n\r\n      return _this.success(data);\r\n    })();\r\n  }\r\n\r\n  infoAction() {\r\n    var _this2 = this;\r\n\r\n    return _asyncToGenerator(function* () {\r\n      const id = _this2.get('id');\r\n      const model = _this2.model('topic');\r\n      const data = yield model.where({ id: id }).find();\r\n\r\n      return _this2.success(data);\r\n    })();\r\n  }\r\n\r\n  storeAction() {\r\n    var _this3 = this;\r\n\r\n    return _asyncToGenerator(function* () {\r\n      if (!_this3.isPost) {\r\n        return false;\r\n      }\r\n\r\n      const values = _this3.post();\r\n      const id = _this3.post('id');\r\n\r\n      const model = _this3.model('topic');\r\n      values.is_show = values.is_show ? 1 : 0;\r\n      values.is_new = values.is_new ? 1 : 0;\r\n      if (id > 0) {\r\n        yield model.where({ id: id }).update(values);\r\n      } else {\r\n        delete values.id;\r\n        yield model.add(values);\r\n      }\r\n      return _this3.success(values);\r\n    })();\r\n  }\r\n\r\n  destoryAction() {\r\n    var _this4 = this;\r\n\r\n    return _asyncToGenerator(function* () {\r\n      const id = _this4.post('id');\r\n      yield _this4.model('topic').where({ id: id }).limit(1).delete();\r\n      // TODO 删除图片\r\n\r\n      return _this4.success();\r\n    })();\r\n  }\r\n};\r\n//# sourceMappingURL=topic.js.map"
    ]
}